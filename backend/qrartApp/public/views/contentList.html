<div class="content-manager p-4">
	<!-- Header con ricerca -->
	<div class="flex justify-between items-center mb-6">
		<h1 class="text-2xl font-bold">Gestione Contenuti</h1>
		<div class="search-box">
			<input type="text"
				   ng-model="searchQuery"
				   placeholder="Cerca contenuti..."
				   class="px-4 py-2 border rounded-lg focus:outline-none focus:ring-2">
		</div>
	</div>
	
	<!-- Loading state -->
	<div ng-if="loading" class="text-center py-8">
		<div class="spinner"></div>
		<p>Caricamento contenuti...</p>
	</div>
	
	<!-- Error state -->
	<div ng-if="error" class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4">
		<p>{{error}}</p>
	</div>
	
	<!-- Content list -->
	<div ng-if="!loading && !error" class="overflow-x-auto">
		<table class="min-w-full bg-white rounded-lg overflow-hidden">
			<thead class="bg-gray-100">
			<tr>
				<th class="px-4 py-3 cursor-pointer" ng-click="sortField='caller_name'; sortReverse=!sortReverse">
					Nome Chiamante
					<i class="fas" ng-class="{'fa-sort-up': sortField=='caller_name' && !sortReverse, 'fa-sort-down': sortField=='caller_name' && sortReverse}"></i>
				</th>
				<th class="px-4 py-3">Titolo</th>
				<th class="px-4 py-3">Tipo</th>
				<th class="px-4 py-3">Short Code</th>
				<th class="px-4 py-3">Lingue</th>
				<th class="px-4 py-3 text-right">Azioni</th>
			</tr>
			</thead>
			<tbody>
			<tr ng-repeat="content in contents | filter:filterContents | orderBy:sortField:sortReverse"
				class="border-b hover:bg-gray-50">
				<td class="px-4 py-3">{{content.caller_name}}</td>
				<td class="px-4 py-3">{{content.caller_title}}</td>
				<td class="px-4 py-3">
                        <span class="px-2 py-1 rounded-full text-xs"
							  ng-class="{
                                'bg-blue-100 text-blue-800': content.content_type === 'audio',
                                'bg-green-100 text-green-800': content.content_type === 'video',
                                'bg-purple-100 text-purple-800': content.content_type === 'audio_call',
                                'bg-yellow-100 text-yellow-800': content.content_type === 'video_call'
                              }">
                            {{content.content_type}}
                        </span>
				</td>
				<td class="px-4 py-3 font-mono">{{content.short_code}}</td>
				<td class="px-4 py-3">
					<div class="flex gap-1">
                            <span ng-repeat="lang in content.languages"
								  class="px-2 py-1 bg-gray-100 rounded text-xs">
                                {{lang}}
                            </span>
					</div>
				</td>
				<td class="px-4 py-3 text-right">
					<div class="flex justify-end gap-2">
						<!-- Pulsante QR Code -->
						<button ng-click="downloadQrCode(content)"
								class="p-2 text-gray-600 hover:text-gray-900"
								title="Scarica QR Code">
							<i class="fas fa-qrcode"></i>
						</button>
						
						<!-- Pulsante Preview -->
						<a ng-href="/content/{{content.short_code}}"
						   target="_blank"
						   class="p-2 text-gray-600 hover:text-gray-900"
						   title="Anteprima">
							<i class="fas fa-eye"></i>
						</a>
						
						<!-- Pulsante Modifica -->
						<button ng-click="openEditModal(content)"
								class="p-2 text-gray-600 hover:text-gray-900"
								title="Modifica">
							<i class="fas fa-edit"></i>
						</button>
					</div>
				</td>
			</tr>
			</tbody>
		</table>
	</div>
	
	<!-- Empty state -->
	<div ng-if="!loading && !error && contents.length === 0" class="text-center py-8">
		<p class="text-gray-500">Nessun contenuto trovato</p>
	</div>
</div>